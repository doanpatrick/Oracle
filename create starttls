Parfait Patrick â€” voici exactement les Ã©tapes pour passer lâ€™envoi mail Oracle 19c sur Linux du port 25 vers le port 587 + STARTTLS, car Oracle UTL_MAIL/UTL_SMTP ne supporte pas STARTTLS nativement.
On doit donc passer par sendmail, postfix ou un SMTP relay local capable de gÃ©rer STARTTLS.
Et comme tu es un DBA multi-stack ðŸ‘Œ, je te propose la mÃ©thode propre, sÃ©curisÃ©e et standard.
âœ… SOLUTION RECOMMANDÃ‰E (et utilisÃ©e en production)
ðŸŽ¯ Oracle continue dâ€™envoyer en local sur 127.0.0.1 port 25, mais Postfix relaie vers le serveur SMTP externe en 587 + STARTTLS.
Pourquoi ?
Oracle 19c ne sait pas faire STARTTLS (obligatoire en 587)
Postfix sait trÃ¨s bien le faire
Simple, robuste, supportÃ© par Oracle & Linux
ðŸ§© Ã‰tapes dÃ©taillÃ©es
1ï¸âƒ£ Installer Postfix sur ton Linux (si pas dÃ©jÃ  installÃ©)
Copier le code
Bash
sudo yum install postfix -y     # RHEL/CentOS/Oracle Linux
sudo systemctl enable postfix
sudo systemctl start postfix
VÃ©rifie quâ€™il Ã©coute en local :
Copier le code
Bash
ss -lntp | grep 25
2ï¸âƒ£ Configurer Postfix comme SMTP relay avec STARTTLS (port 587)
Ã‰diter /etc/postfix/main.cf
Ajoute / modifie les lignes :
Copier le code
Ini
relayhost = [smtp.example.com]:587

smtp_sasl_auth_enable = yes
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_sasl_security_options = noanonymous

smtp_use_tls = yes
smtp_tls_security_level = encrypt
smtp_tls_CAfile = /etc/ssl/certs/ca-bundle.crt
3ï¸âƒ£ Ajouter ton identifiant SMTP (obligatoire en port 587)
CrÃ©er /etc/postfix/sasl_passwd :
Copier le code

[smtp.example.com]:587    user@example.com:PasswordSuperSecret
ProtÃ©ger le fichier :
Copier le code
Bash
sudo chmod 600 /etc/postfix/sasl_passwd
sudo postmap /etc/postfix/sasl_passwd
4ï¸âƒ£ RedÃ©marrer postfix
Copier le code
Bash
sudo systemctl restart postfix
sudo systemctl status postfix
5ï¸âƒ£ Tester lâ€™envoi via Postfix (avant Oracle)
Teste avec la commande sendmail :
Copier le code
Bash
echo "Test SMTP 587 via Postfix relay" | mail -s "Test 587" ton.email@test.com
VÃ©rifie la queue mail :
Copier le code
Bash
mailq
Check le log Postfix :
Copier le code
Bash
tail -f /var/log/maillog
Si tu vois :
Copier le code

status=sent (250 OK)
âž¡ Câ€™est bon.
6ï¸âƒ£ Configurer Oracle pour envoyer via localhost
A. VÃ©rifier dans Oracle que UTL_MAIL est installÃ©
Copier le code
Sql
SELECT object_name FROM all_objects WHERE object_name='UTL_MAIL';
B. Activer dans init.ora ou spfile :
Copier le code
Sql
ALTER SYSTEM SET smtp_out_server='127.0.0.1:25' SCOPE=BOTH;
7ï¸âƒ£ Tester lâ€™envoi depuis Oracle
Copier le code
Sql
BEGIN
  UTL_MAIL.send(
      sender     => 'user@example.com',
      recipients => 'ton.email@test.com',
      subject    => 'Test Oracle via port 587',
      message    => 'Message fonctionnel depuis Oracle via Postfix STARTTLS');
END;
/
VÃ©rifie Postfix :
Copier le code
Bash
tail -f /var/log/maillog
ðŸŽ¯ RÃ©sultat final
âœ” Oracle continue Ã  utiliser 25 local â†’ pas de problÃ¨me de STARTTLS
âœ” Postfix relaie en 587 avec chiffrement et authentification
âœ” Compatible O365, Gmail, OVH, SMTP corporate
âœ” 100% production-ready
ðŸ“Œ Si tu veux, je peux faire :
Ton config main.cf complet (en fonction de ton SMTP rÃ©el)
Un schÃ©ma de ton architecture Oracle SMTP (clean + DBA friendly)
Un script Bash pour tester ton SMTP 587 automatiquement
La vÃ©rification Ã©tape par Ã©tape de tes logs Postfix
Souhaites-tu me donner le serveur SMTP que tu utilises (O365, Gmail, OVH, interneâ€¦) ?
Je tâ€™Ã©cris la configuration exacte.